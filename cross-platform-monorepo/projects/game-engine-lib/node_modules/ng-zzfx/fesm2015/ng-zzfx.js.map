{"version":3,"file":"ng-zzfx.js","sources":["ng://ng-zzfx/lib/source/zzfx.js","ng://ng-zzfx/lib/zoundfx.ts","ng://ng-zzfx/lib/zoundfx.directive.ts","ng://ng-zzfx/lib/ng-zzfx.module.ts","ng://ng-zzfx/public-api.ts","ng://ng-zzfx/ng-zzfx.ts"],"sourcesContent":["// ZzFX - Zuper Zmall Zound Zynth - Micro Edition\n// MIT License - Copyright 2019 Frank Force\n// https://github.com/KilledByAPixel/ZzFX\n\n// This is a tiny build of zzfx with only a zzfx function to play sounds.\n// You can use zzfxV to set volume.\n// There is a small bit of optional code to improve compatibility.\n// Feel free to minify it further for your own needs!\n\n// ZzFX - Zuper Zmall Zound Zynth - Micro Edition\n// MIT License - Copyright 2019 Frank Force\n// https://github.com/KilledByAPixel/ZzFX\n'use strict';\nlet zzfx;\nlet zzfxV;\nlet zzfxX;\n\n// Liron's wrapping in order to expose API:\nexport function ZZFX (vol) {\n  // ZzFXMicro - Zuper Zmall Zound Zynth\n  zzfxV= vol // volume\n  zzfx=    // play sound\n    (J=1,K=.05,h=220,f=0,k=0,n=.1,g=0,A=1,r=0,B=0,t=0,C=0,u=0,D=0,v=0,L=0,e=0,c=2*Math.PI,b=44100,w=p=>2*p*Math.random()-p,x=p=>0<p?1:-1,M=r*=500*c/b**2,E=h*=(1+w(K))*c/b,N=x(v)*c/4,q=[],F=0,G=0,d=0,l=1,H=0,I=0,a=0,O=.5,m,y,z=zzfxX.createBufferSource())=>{f=50+f*b|0;k=k*b|0;n=n*b|0;e=e*b|0;B*=500*c/b**3;m=f+k+n+e;v*=c/b;t*=c/b;C*=b;for(u*=b;d<m;q[d++]=a)++I>100*L&&(I=0,a=F*h*Math.sin(G*v-N),a=g?1<g?2<g?3<g?4<g?x((a/c%1+1)%1-(O+=1e3*A/b)%1):Math.sin((a%c)**3):Math.max(Math.min(Math.tan(a),1),-1):1-(2*a/c%2+2)%2:1-4*Math.abs(Math.round(a/c)-a/c):Math.sin(a),5>g&&(a=x(a)*Math.abs(a)**A),a*=J*zzfxV*(d<f?d/f:d<f+k?1:d<m-e?1-(d-f-k)/n:0),a=e?a/2+(e>d?0:(d<m-e?1:(d-m)/e)*q[d-e]/2):a),F+=1+w(D),G+=1+w(D),h+=r+=B,l&&++l>C&&(E+=t,h+=t,l=0),u&&++H>u&&(h=E,r=M,H=1,l=l||1);y=zzfxX.createBuffer(1,q.length,b);y.getChannelData(0).set(q);z.buffer=y;z.connect(zzfxX.destination);z.start()}\n  zzfxX=new(window.AudioContext||webkitAudioContext);zzfxX.z=zzfxX.createBufferSource;zzfxX.createBufferSource=(s=zzfxX.z())=>(s.start=s.start||(t=>zzfxX.noteOn(t)),s)\n  return zzfx;\n}\n","import * as zzfx from './source/zzfx';\n\nexport class Zoundfx {\n\n static start(vol: number)  {\n    const zzfxFn = zzfx.ZZFX(vol);\n    return (sound: number[]) => {\n     zzfxFn(...sound);\n   };\n  }\n}\n","import {AfterViewInit, Directive, ElementRef, Input, Renderer2} from '@angular/core';\nimport * as zzfx from './source/zzfx';\n\n@Directive({\n  selector: '[zoundfx]'\n})\nexport class ZoundfxDirective implements AfterViewInit {\n  private zzfxFn; // A blackbox with too may params to type..\n  @Input() vol = 0.1; // Number from 0 to 1;\n  @Input() trigger = 'onclick';\n  @Input() zound: number[];\n\n  constructor(private el: ElementRef, private renderer: Renderer2) { }\n\n  ngAfterViewInit() {\n    this.zzfxFn = zzfx.ZZFX(this.vol);\n    this.registerEventListeners();\n  }\n\n  registerEventListeners() {\n    this.renderer.listen(this.el.nativeElement, this.trigger, () => {\n      this.zzfxFn(...this.zound);\n    });\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { ZoundfxDirective } from './zoundfx.directive';\n@NgModule({\n  declarations: [ZoundfxDirective],\n  exports: [ZoundfxDirective]\n})\nexport class NgZzfxModule { }\n","/*\n * Public API Surface of ng-zzfx\n */\n\nexport * from './lib/zoundfx';\nexport * from './lib/zoundfx.directive';\nexport * from './lib/ng-zzfx.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["zzfx.ZZFX"],"mappings":"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"}